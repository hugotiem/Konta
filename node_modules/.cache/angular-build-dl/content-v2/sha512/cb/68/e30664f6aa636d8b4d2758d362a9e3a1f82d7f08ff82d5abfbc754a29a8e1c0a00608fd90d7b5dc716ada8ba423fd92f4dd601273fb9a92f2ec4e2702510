(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{xhSr:function(t,e,i){"use strict";i.r(e),i.d(e,"EditPageModule",(function(){return u}));var o=i("ofXK"),s=i("3Pt+"),n=i("TEn/"),r=i("tyNb"),l=i("mrSG"),b=i("9ybx"),a=i("fXoL"),c=i("sSZD");function d(t,e){if(1&t&&(a.Lb(0,"ion-item",10),a.Lb(1,"ion-label"),a.ic(2,"Nom du client :"),a.Kb(),a.Lb(3,"ion-note",11),a.ic(4),a.Kb(),a.Kb()),2&t){const t=a.Vb();a.yb(4),a.kc(" ",t.item.clientName," ")}}const m=[{path:"",component:(()=>{class t{constructor(t,e,i,o){this.navCtrl=t,this.modalController=e,this.afDB=i,this.route=o,this.item=[],this.produits=[],this.details="",this.route.queryParams.subscribe(t=>{this.key=t.item.key})}ngOnInit(){this.getDeliveryFromFirebase(),this.getProduitsFromFirebase()}goBack(){this.navCtrl.navigateBack("tabs/tab3")}getType(t){return"lone"==t?"Livraison seule":"Livraison partag\xe9e"}addNewExpModal(){return Object(l.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:b.a,componentProps:{afDB:this.afDB,key:this.key,delivery:this.item.order,title:this.item.title,price:this.item.price,date:this.item.date,km:this.item.distance,type:this.item.type,clientName:this.item.clientName},cssClass:"my-custom-class"});return yield t.present()}))}setQuantite(t,e){for(let i of Object.keys(this.produits))this.produits[i].key==t&&(this.produits[i].content.stock=this.produits[i].content.stock+e,this.afDB.object("produits/"+t+"/stock").set(this.produits[i].content.stock))}delete(){for(let t of Object.keys(this.item.order))for(let e of Object.keys(this.item.order[t].items))if(null!=this.item.order[t].items[e].formuleContent){if(0!=this.item.order[t].items[e].formuleContent.length)for(let i of Object.keys(this.item.order[t].items[e].formuleContent))this.setQuantite(this.item.order[t].items[e].formuleContent[i].key,this.item.order[t].items[e].formuleContent[i].quantite)}else""!=this.item.order[t].items[e].key&&this.setQuantite(this.item.order[t].items[e].key,this.item.order[t].items[e].quantite);this.afDB.list("Livraisons/").remove(this.key),this.goBack()}getDeliveryFromFirebase(){this.afDB.object("Livraisons/"+this.key).valueChanges().subscribe(t=>{this.item=t})}getProduitsFromFirebase(){this.afDB.list("produits").snapshotChanges(["child_added","child_removed","child_changed"]).subscribe(t=>{this.produits=[],this.details="",t.forEach(t=>{this.produits.push({key:t.key,content:t.payload.exportVal()})});for(let e of Object.keys(this.item.order))for(let t of Object.keys(this.item.order[e].items))this.details=this.item.order[e]==this.item.order[0]&&this.item.order[e].items[t]==this.item.order[0].items[0]?this.item.order[e].items[t].quantite+" x "+this.item.order[e].items[t].title:this.details+", "+this.item.order[e].items[t].quantite+" x "+this.item.order[e].items[t].title})}}return t.\u0275fac=function(e){return new(e||t)(a.Ib(n.X),a.Ib(n.W),a.Ib(c.a),a.Ib(r.a))},t.\u0275cmp=a.Cb({type:t,selectors:[["app-edit"]],decls:43,vars:8,consts:[[1,"ion-no-border"],[2,"--border-style","none"],["slot","start","fill","clear",2,"--padding-start","0",3,"click"],["size","large","name","chevron-back"],["slot","end","fill","clear",3,"click"],["lines","none"],[2,"text-align","center"],[2,"font-size","20pt","font-weight","bold"],[2,"--padding-end","0"],["slot","end","readonly","","displayFormat","MM/DD/YYYY",2,"text-align","end",3,"value"],["lines","full"],["slot","end",2,"text-align","right"],["lines","full",4,"ngIf"],["lines","full","fill","clear","expand","full",3,"click"],["color","danger"]],template:function(t,e){1&t&&(a.Lb(0,"ion-header",0),a.Lb(1,"ion-toolbar",1),a.Lb(2,"ion-button",2),a.Tb("click",(function(){return e.goBack()})),a.Jb(3,"ion-icon",3),a.Kb(),a.Lb(4,"ion-button",4),a.Tb("click",(function(){return e.addNewExpModal()})),a.Lb(5,"ion-label"),a.ic(6,"Edit"),a.Kb(),a.Kb(),a.Kb(),a.Lb(7,"ion-list",5),a.Lb(8,"ion-item",6),a.Lb(9,"ion-label",7),a.ic(10),a.Kb(),a.Kb(),a.Lb(11,"ion-item"),a.Lb(12,"ion-title"),a.ic(13),a.Kb(),a.Kb(),a.Lb(14,"ion-item",8),a.Lb(15,"ion-label"),a.ic(16,"Livr\xe9 par "),a.Lb(17,"strong"),a.ic(18),a.Kb(),a.Kb(),a.Jb(19,"ion-datetime",9),a.Kb(),a.Jb(20,"ion-item-divider",10),a.Lb(21,"ion-item",10),a.Lb(22,"ion-label"),a.ic(23,"D\xe9tail :"),a.Kb(),a.Lb(24,"ion-note",11),a.ic(25),a.Kb(),a.Kb(),a.Lb(26,"ion-item",10),a.Lb(27,"ion-label"),a.ic(28,"Distance :"),a.Kb(),a.Lb(29,"ion-note",11),a.ic(30),a.Kb(),a.Kb(),a.hc(31,d,5,1,"ion-item",12),a.Lb(32,"ion-item"),a.Lb(33,"ion-label"),a.ic(34,"Type de livraison :"),a.Kb(),a.Lb(35,"ion-note",11),a.ic(36),a.Kb(),a.Kb(),a.Jb(37,"ion-item-divider"),a.Lb(38,"section"),a.Lb(39,"ion-button",13),a.Tb("click",(function(){return e.delete()})),a.Lb(40,"ion-label",14),a.ic(41,"Supprimer item"),a.Kb(),a.Kb(),a.Kb(),a.Kb(),a.Kb(),a.Jb(42,"ion-content")),2&t&&(a.yb(10),a.kc(" ",e.item.title," "),a.yb(3),a.kc("\u20ac",(e.item.price-0).toFixed(2)," "),a.yb(5),a.jc(e.item.name),a.yb(1),a.Zb("value",e.item.date),a.yb(6),a.kc(" ",e.details," "),a.yb(5),a.kc(" ",e.item.distance," km "),a.yb(1),a.Yb("ngIf","prodOnly"!=e.item.type),a.yb(5),a.kc(" ",e.getType(e.item.type)," "))},directives:[n.q,n.T,n.e,n.r,n.z,n.A,n.t,n.R,n.m,n.cb,n.u,n.C,o.i,n.l],styles:["ion-item.ion-activated[_ngcontent-%COMP%]{--background-activated:none}"]}),t})()}];let h=(()=>{class t{}return t.\u0275mod=a.Gb({type:t}),t.\u0275inj=a.Fb({factory:function(e){return new(e||t)},imports:[[r.i.forChild(m)],r.i]}),t})(),u=(()=>{class t{}return t.\u0275mod=a.Gb({type:t}),t.\u0275inj=a.Fb({factory:function(e){return new(e||t)},imports:[[o.b,s.a,n.U,h]]}),t})()}}]);