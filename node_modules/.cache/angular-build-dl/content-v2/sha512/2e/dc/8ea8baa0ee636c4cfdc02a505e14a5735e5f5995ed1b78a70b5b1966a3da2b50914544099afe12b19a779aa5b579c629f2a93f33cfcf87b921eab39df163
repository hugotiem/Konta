!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"9ybx":function(e,i,o){"use strict";o.d(i,"a",(function(){return w}));var a=o("mrSG"),r=o("fXoL"),s=o("TEn/"),l=o("ofXK");function c(t,e){if(1&t){var n=r.Mb();r.Lb(0,"ion-item",4),r.Tb("click",(function(){r.dc(n);var t=r.Vb().$implicit;return r.Vb().close(t)})),r.Lb(1,"ion-label"),r.ic(2),r.Kb(),r.Kb()}if(2&t){var i=r.Vb().$implicit;r.Yb("disabled",0==i.quantite),r.yb(2),r.kc(" ",i.title," ")}}function b(t,e){if(1&t&&(r.Lb(0,"ion-item-group"),r.hc(1,c,3,2,"ion-item",3),r.Kb()),2&t){var n=e.$implicit;r.yb(1),r.Yb("ngIf",!n.formule)}}function u(t,e){if(1&t){var n=r.Mb();r.Lb(0,"ion-item",4),r.Tb("click",(function(){r.dc(n);var t=r.Vb().$implicit;return r.Vb().close(t)})),r.Lb(1,"ion-label"),r.ic(2),r.Kb(),r.Kb()}if(2&t){var i=r.Vb().$implicit;r.Yb("disabled",!i.disponible),r.yb(2),r.kc(" ",i.title," ")}}function d(t,e){if(1&t&&(r.Lb(0,"ion-item-group"),r.hc(1,u,3,2,"ion-item",3),r.Kb()),2&t){var n=e.$implicit;r.yb(1),r.Yb("ngIf",n.formule)}}var p,f=((p=function(){function e(n){t(this,e),this.modalctrl=n,this.items=[]}return n(e,[{key:"ngOnInit",value:function(){this.getTitleInFirebase()}},{key:"close",value:function(t){var e=this,n=[];setTimeout((function(){if(null!==t){if(t.formule)for(var i=0,o=Object.keys(t.formuleContent);i<o.length;i++)for(var a=o[i],r=0,s=Object.keys(e.items);r<s.length;r++){var l=s[r];e.items[l].title!=t.formuleContent[a].title||e.items[l].formule||n.push({tab:e.items[l],quantite:t.formuleContent[a].quantite})}e.modalctrl.dismiss({item:t,formuleItems:n})}else e.modalctrl.dismiss()}),200)}},{key:"getTitleInFirebase",value:function(){var t=this;this.afDB.list("produits/").snapshotChanges(["child_added","child_removed","child_changed"]).subscribe((function(e){t.items=[],e.forEach((function(e){t.items.push({title:e.payload.exportVal().name,price:e.payload.exportVal().price,firstPrice:e.payload.exportVal().firstPrice,quantite:e.payload.exportVal().stock,key:e.key,formule:e.payload.exportVal().formule,formuleContent:e.payload.exportVal().formuleContent,disponible:e.payload.exportVal().disponible})}));for(var n=0,i=Object.keys(t.items);n<i.length;n++){var o=i[n];if(t.items[o].formule)for(var a=0,r=0,s=Object.keys(t.items[o].formuleContent);r<s.length;r++)for(var l=s[r],c=0,b=Object.keys(t.items);c<b.length;c++){var u=b[c];t.items[o].formuleContent[l].title!=t.items[u].title||t.items[u].formule||(t.items[u].quantite-t.items[o].formuleContent[l].quantite<0?t.items[o].disponible=!1:(a+=1,t.items[o].formuleContent.length==a&&(t.items[o].disponible=!0)))}}}))}}]),e}()).\u0275fac=function(t){return new(t||p)(r.Ib(s.X))},p.\u0275cmp=r.Cb({type:p,selectors:[["app-items"]],inputs:{afDB:"afDB"},decls:19,vars:2,consts:[["fill","clear","slot","start",3,"click"],["disabled","","animated","","showCancelButton","focus"],[4,"ngFor","ngForOf"],["button","","detail","false",3,"disabled","click",4,"ngIf"],["button","","detail","false",3,"disabled","click"]],template:function(t,e){1&t&&(r.Lb(0,"ion-header"),r.Lb(1,"ion-toolbar"),r.Lb(2,"ion-button",0),r.Tb("click",(function(){return e.close(null)})),r.Lb(3,"ion-label"),r.ic(4,"Cancel"),r.Kb(),r.Kb(),r.Lb(5,"ion-title"),r.ic(6,"Selectionner produit"),r.Kb(),r.Kb(),r.Lb(7,"ion-toolbar"),r.Jb(8,"ion-searchbar",1),r.Kb(),r.Kb(),r.Lb(9,"ion-content"),r.Lb(10,"ion-list"),r.Lb(11,"ion-list-header"),r.Lb(12,"ion-title"),r.ic(13,"Produits"),r.Kb(),r.Kb(),r.hc(14,b,2,1,"ion-item-group",2),r.Lb(15,"ion-list-header"),r.Lb(16,"ion-title"),r.ic(17,"Formules"),r.Kb(),r.Kb(),r.hc(18,d,2,1,"ion-item-group",2),r.Kb(),r.Kb()),2&t&&(r.yb(14),r.Yb("ngForOf",e.items),r.yb(4),r.Yb("ngForOf",e.items))},directives:[s.p,s.U,s.d,s.z,s.S,s.J,s.eb,s.k,s.A,s.B,l.h,s.v,l.i,s.t],styles:[""]}),p);function m(t,e){if(1&t){var n=r.Mb();r.Lb(0,"ion-item",2),r.Tb("click",(function(){r.dc(n);var t=e.$implicit;return r.Vb().dissmis(t)})),r.Lb(1,"ion-label"),r.ic(2),r.Kb(),r.Kb()}if(2&t){var i=e.$implicit;r.yb(2),r.kc(" ",i," ")}}var h,g,v=((g=function(){function e(n){t(this,e),this.popoverCtrl=n,this.names=["Alexis","Hugo","Marvyn","Gud","Taheir"]}return n(e,[{key:"ngOnInit",value:function(){}},{key:"dissmis",value:function(t){this.popoverCtrl.dismiss({fromPopover:t})}}]),e}()).\u0275fac=function(t){return new(t||g)(r.Ib(s.bb))},g.\u0275cmp=r.Cb({type:g,selectors:[["app-names"]],decls:2,vars:1,consts:[["mode","ios","lines","none"],["button","","detail","false",3,"click",4,"ngFor","ngForOf"],["button","","detail","false",3,"click"]],template:function(t,e){1&t&&(r.Lb(0,"ion-list",0),r.hc(1,m,3,1,"ion-item",1),r.Kb()),2&t&&(r.yb(1),r.Yb("ngForOf",e.names))},directives:[s.A,l.h,s.t,s.z],styles:[""]}),g),y=((h=function(){function e(n){t(this,e),this.popoverCtrl=n}return n(e,[{key:"ngOnInit",value:function(){}},{key:"complete",value:function(){this.close(!1,!1,"complete")}},{key:"partiel",value:function(){this.close(!0,!1,"partiel")}},{key:"prodOnly",value:function(){this.close(!1,!0,"prodOnly")}},{key:"close",value:function(t,e,n){this.popoverCtrl.dismiss({partiel:t,only:e,type:n})}}]),e}()).\u0275fac=function(t){return new(t||h)(r.Ib(s.bb))},h.\u0275cmp=r.Cb({type:h,selectors:[["app-options-livraison"]],decls:10,vars:0,consts:[["lines","none"],["button","",3,"click"]],template:function(t,e){1&t&&(r.Lb(0,"ion-list",0),r.Lb(1,"ion-item",1),r.Tb("click",(function(){return e.complete()})),r.Lb(2,"ion-label"),r.ic(3,"Livraison compl\xe8te"),r.Kb(),r.Kb(),r.Lb(4,"ion-item",1),r.Tb("click",(function(){return e.partiel()})),r.Lb(5,"ion-label"),r.ic(6,"Livraison partielle"),r.Kb(),r.Kb(),r.Lb(7,"ion-item",1),r.Tb("click",(function(){return e.prodOnly()})),r.Lb(8,"ion-label"),r.ic(9,"Produit seul"),r.Kb(),r.Kb(),r.Kb())},directives:[s.A,s.t,s.z],styles:[""]}),h),k=o("3Pt+");function C(t,e){if(1&t){var n=r.Mb();r.Lb(0,"ion-item",9),r.Lb(1,"ion-input",28),r.Tb("ngModelChange",(function(t){return r.dc(n),r.Vb().firstPrice=t})),r.Kb(),r.Jb(2,"span",11),r.Lb(3,"ion-label"),r.ic(4,"EUR"),r.Kb(),r.Jb(5,"ion-icon",29),r.Kb()}if(2&t){var i=r.Vb();r.yb(1),r.Yb("ngModel",i.firstPrice)("value",i.firstPrice)}}function L(t,e){if(1&t){var n=r.Mb();r.Lb(0,"ion-item",9),r.Lb(1,"ion-input",30),r.Tb("ngModelChange",(function(t){return r.dc(n),r.Vb().price=t})),r.Kb(),r.Jb(2,"span",11),r.Lb(3,"ion-label"),r.ic(4,"EUR"),r.Kb(),r.Jb(5,"ion-icon",29),r.Kb()}if(2&t){var i=r.Vb();r.yb(1),r.Yb("ngModel",i.price)("value",i.price)}}function O(t,e){if(1&t&&(r.Lb(0,"ion-label",31),r.ic(1),r.Kb()),2&t){var n=r.Vb();r.yb(1),r.kc(" ",n.name," ")}}function P(t,e){1&t&&(r.Lb(0,"ion-note"),r.ic(1,"Nom du Livreur"),r.Kb())}function M(t,e){1&t&&(r.Lb(0,"ion-note"),r.ic(1,"Nom"),r.Kb())}function K(t,e){if(1&t){var n=r.Mb();r.Lb(0,"ion-item",9),r.Lb(1,"ion-input",32),r.Tb("ngModelChange",(function(t){return r.dc(n),r.Vb().clientName=t})),r.Kb(),r.Jb(2,"span",24),r.Kb()}if(2&t){var i=r.Vb();r.yb(1),r.Yb("ngModel",i.clientName)("value",i.clientName)}}function x(t,e){if(1&t){var n=r.Mb();r.Lb(0,"ion-item",9),r.Lb(1,"ion-input",33),r.Tb("ngModelChange",(function(t){return r.dc(n),r.Vb().km=t})),r.Kb(),r.Jb(2,"span",34),r.Lb(3,"ion-label",35),r.ic(4,"KM"),r.Kb(),r.Kb()}if(2&t){var i=r.Vb();r.yb(1),r.Yb("ngModel",i.km)("value",i.km)}}var _,w=((_=function(){function e(n,i){t(this,e),this.modalCtrl=n,this.popoverCtrl=i,this.isAlreadyHere=!1,this.livrPartiel=!1,this.prodOnly=!1,this.formule=!1,null==this.date&&(this.date=(new Date).toISOString()),null==this.quantite&&(this.quantite=1),null==this.type&&(this.type="complete")}return n(e,[{key:"ngOnInit",value:function(){"partiel"==this.type&&(this.livrPartiel=!0),"prodOnly"==this.type&&(this.prodOnly=!0)}},{key:"close",value:function(t){this.modalCtrl.dismiss(t?{save:t,key:this.key,title:this.title,price:this.price,firstPrice:this.firstPrice,km:this.km,date:this.date,name:this.name,quantite:this.quantite,clientName:this.clientName,type:this.type}:{save:t})}},{key:"add",value:function(){null!=this.max?this.quantite<this.max&&this.quantite++:this.quantite++}},{key:"remove",value:function(){this.quantite>1&&this.quantite--}},{key:"itemsModal",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.modalCtrl,t.t1=f,t.t2={afDB:this.afDB},t.t3=!0,t.next=6,this.modalCtrl.getTop();case 6:return t.t4=t.sent,t.t5={component:t.t1,componentProps:t.t2,cssClass:"my-custom-class",swipeToClose:t.t3,presentingElement:t.t4},t.next=10,t.t0.create.call(t.t0,t.t5);case 10:return(e=t.sent).onDidDismiss().then((function(t){void 0!==t.data&&(n.title=t.data.item.title,n.price=n.ifEmpty(t.data.item.price,n.prodOnly,!1),n.firstPrice=n.ifEmpty(t.data.item.firstPrice,n.livrPartiel,!1),n.keyProduit=t.data.item.key,n.max=t.data.item.quantite,n.formule=t.data.item.formule,n.formuleItems=t.data.formuleItems)})),t.next=14,e.present();case 14:return t.abrupt("return",t.sent);case 15:case"end":return t.stop()}}),t,this)})))}},{key:"activated",value:function(){document.querySelector("#date-item").classList.toggle("no-input-feet")}},{key:"namesPopover",value:function(t){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.querySelector("#no-input").classList.toggle("no-input-feet"),e.next=3,this.popoverCtrl.create({component:v,cssClass:"sort-popover",event:t,mode:"md",translucent:!0});case 3:return(n=e.sent).onDidDismiss().then((function(t){void 0!==t.data&&(i.name=t.data.fromPopover),document.querySelector("#no-input").classList.toggle("no-input-feet")})),e.next=7,n.present();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})))}},{key:"openOptionPopover",value:function(t){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.popoverCtrl.create({component:y,event:t,mode:"md",translucent:!0});case 2:return(n=e.sent).onWillDismiss().then((function(t){i.livrPartiel=t.data.partiel,i.prodOnly=t.data.only,i.type=t.data.type})),e.next=6,n.present();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"ifEmpty",value:function(t,e,n){return e?n?"":0:t}},{key:"save",value:function(){if(this.formule)for(var t=0,e=Object.keys(this.formuleItems);t<e.length;t++){var n=e[t];this.afDB.object("produits/"+this.formuleItems[n].tab.key+"/stock/").set(this.formuleItems[n].tab.quantite-this.formuleItems[n].quantite)}else null!=this.keyProduit&&this.afDB.object("produits/"+this.keyProduit+"/stock/").set(this.max-this.quantite);this.isAlreadyHere?this.modifyItemInFirebase(this.title,this.ifEmpty(this.price,this.prodOnly,!1),this.ifEmpty(this.km,this.prodOnly,!1),this.date,this.name,this.ifEmpty(this.firstPrice,this.livrPartiel,!1),this.quantite,this.ifEmpty(this.clientName,this.prodOnly,!0),this.type):this.addItemToFirebase(this.title,this.ifEmpty(this.price,this.prodOnly,!1),this.ifEmpty(this.km,this.prodOnly,!1),this.date,this.name,this.ifEmpty(this.firstPrice,this.livrPartiel,!1),this.quantite,this.ifEmpty(this.clientName,this.prodOnly,!0),this.type),this.close(!0)}},{key:"addItemToFirebase",value:function(t,e,n,i,o,a,r,s,l){this.afDB.list("Livraisons/").push({title:t,price:e,firstPrice:a,distance:n,date:i,name:o,quantite:r,clientName:s,type:l})}},{key:"modifyItemInFirebase",value:function(t,e,n,i,o,a,r,s,l){this.afDB.object("Livraisons/"+this.key+"/title/").set(t),this.afDB.object("Livraisons/"+this.key+"/price/").set(e),this.afDB.object("Livraisons/"+this.key+"/distance/").set(n),this.afDB.object("Livraisons/"+this.key+"/name/").set(o),this.afDB.object("Livraisons/"+this.key+"/clientName/").set(s),this.afDB.object("Livraisons/"+this.key+"/date/").set(i),this.afDB.object("Livraisons/"+this.key+"/firstPrice/").set(a),this.afDB.object("Livraisons/"+this.key+"/quantite/").set(r),this.afDB.object("Livraisons/"+this.key+"/type/").set(l)}}]),e}()).\u0275fac=function(t){return new(t||_)(r.Ib(s.X),r.Ib(s.bb))},_.\u0275cmp=r.Cb({type:_,selectors:[["app-new"]],inputs:{afDB:"afDB",isAlreadyHere:"isAlreadyHere",key:"key",title:"title",price:"price",firstPrice:"firstPrice",km:"km",date:"date",name:"name",clientName:"clientName",quantite:"quantite",livrPartiel:"livrPartiel",prodOnly:"prodOnly",type:"type"},decls:47,vars:13,consts:[[2,"--border-style","none"],["fill","clear","slot","start",3,"click"],["fill","clear","slot","end",3,"click"],[1,"content",3,"fullscreen"],[2,"margin-top","10px"],["size","large",2,"padding-left","0"],["slot","end","fill","clear",2,"--color","black",3,"click"],["name","chevron-down"],["lines","none"],["mode","ios",1,"full"],["type","text","required","","placeholder","Title",3,"ngModel","value","ngModelChange"],[1,"input-feet","second-size"],["fill","clear","slot","end",1,"modal",3,"click"],["size","large","name","pricetag"],["mode","ios","class","full",4,"ngIf"],["slot","end",2,"display","flex","margin","0","position","relative"],[2,"margin-right","20px","padding","7px",3,"click"],["size","small","name","remove",2,"margin","0"],[2,"position","absolute","left","50%","top","50%","transform","translate(-50%, -50%)"],[2,"margin-left","20px","padding","7px",3,"click"],["name","add",2,"margin","0"],["mode","ios","id","no-input","required","",1,"full",3,"click"],["name","name",4,"ngIf"],[4,"ngIf"],[1,"input-feet"],["slot","end","size","small","name","chevron-down",1,"focus-icon"],["id","date-item",1,"full"],["required","","display-timezone","utc",3,"ngModel","value","ionBlur","ngModelChange"],["type","number","pattern","[0-9]*","placeholder","Prix \xe0 l'achat",3,"ngModel","value","ngModelChange"],["size","small","name","chevron-down"],["type","number","pattern","[0-9]*","placeholder","Prix \xe0 la revente",3,"ngModel","value","ngModelChange"],["name","name"],["type","text","required","","placeholder","Nom du client",3,"ngModel","value","ngModelChange"],["type","number","pattern","[0-9]*","placeholder","Km parcourut",3,"ngModel","value","ngModelChange"],[1,"input-feet","first-size"],["slot","end",2,"margin-right","0"]],template:function(t,e){1&t&&(r.Lb(0,"ion-header"),r.Lb(1,"ion-toolbar",0),r.Lb(2,"ion-button",1),r.Tb("click",(function(){return e.close(!1)})),r.Lb(3,"ion-label"),r.ic(4,"Cancel"),r.Kb(),r.Kb(),r.Lb(5,"ion-title"),r.ic(6,"Nouveau"),r.Kb(),r.Lb(7,"ion-button",2),r.Tb("click",(function(){return e.save()})),r.Lb(8,"ion-label"),r.ic(9,"Save"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(10,"ion-content",3),r.Lb(11,"ion-toolbar",4),r.Lb(12,"ion-title",5),r.ic(13,"Livraison"),r.Kb(),r.Lb(14,"ion-button",6),r.Tb("click",(function(t){return e.openOptionPopover(t)})),r.Jb(15,"ion-icon",7),r.Kb(),r.Kb(),r.Lb(16,"ion-list",8),r.Lb(17,"ion-item",9),r.Lb(18,"ion-input",10),r.Tb("ngModelChange",(function(t){return e.title=t})),r.Kb(),r.Jb(19,"span",11),r.Lb(20,"ion-button",12),r.Tb("click",(function(){return e.itemsModal()})),r.Jb(21,"ion-icon",13),r.Kb(),r.Kb(),r.hc(22,C,6,2,"ion-item",14),r.hc(23,L,6,2,"ion-item",14),r.Lb(24,"ion-item",9),r.Lb(25,"ion-label"),r.ic(26,"Quantit\xe9 :"),r.Kb(),r.Jb(27,"span",11),r.Lb(28,"div",15),r.Lb(29,"ion-chip",16),r.Tb("click",(function(){return e.remove()})),r.Jb(30,"ion-icon",17),r.Kb(),r.Lb(31,"ion-label",18),r.ic(32),r.Kb(),r.Lb(33,"ion-chip",19),r.Tb("click",(function(){return e.add()})),r.Jb(34,"ion-icon",20),r.Kb(),r.Kb(),r.Kb(),r.Lb(35,"ion-item",21),r.Tb("click",(function(t){return e.namesPopover(t)})),r.hc(36,O,2,1,"ion-label",22),r.hc(37,P,2,0,"ion-note",23),r.hc(38,M,2,0,"ion-note",23),r.Jb(39,"span",24),r.Jb(40,"ion-icon",25),r.Kb(),r.hc(41,K,3,2,"ion-item",14),r.hc(42,x,5,2,"ion-item",14),r.Lb(43,"ion-item",26),r.Lb(44,"ion-datetime",27),r.Tb("ionBlur",(function(){return e.activated()}))("ngModelChange",(function(t){return e.date=t})),r.Kb(),r.Jb(45,"span",24),r.Jb(46,"ion-icon",25),r.Kb(),r.Kb(),r.Kb()),2&t&&(r.yb(10),r.Yb("fullscreen",!0),r.yb(8),r.Yb("ngModel",e.title)("value",e.title),r.yb(4),r.Yb("ngIf",!e.livrPartiel),r.yb(1),r.Yb("ngIf",!e.prodOnly),r.yb(9),r.kc(" ",e.quantite," "),r.yb(4),r.Yb("ngIf",void 0!==e.name),r.yb(1),r.Yb("ngIf",null==e.name&&!e.prodOnly),r.yb(1),r.Yb("ngIf",null==e.name&&e.prodOnly),r.yb(3),r.Yb("ngIf",!e.prodOnly),r.yb(1),r.Yb("ngIf",!e.prodOnly),r.yb(2),r.Yb("ngModel",e.date)("value",e.date))},directives:[s.p,s.U,s.d,s.z,s.S,s.k,s.q,s.A,s.t,s.s,s.eb,k.g,k.d,k.e,l.i,s.j,s.l,s.db,s.Z,k.f,s.C],styles:[".content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-top:10px;--padding-bottom:10px}.modal[_ngcontent-%COMP%]{--border-style:solid;--border-color:#000;--color:#000;--border-width:2px;height:45px}.focus-icon[_ngcontent-%COMP%]{margin-right:0}.item-has-focus[_ngcontent-%COMP%]   .input-feet[_ngcontent-%COMP%]{background:#3880ff;opacity:1}.item-has-focus[_ngcontent-%COMP%]   .focus-icon[_ngcontent-%COMP%]{color:#3880ff}.no-input-feet[_ngcontent-%COMP%]   .input-feet[_ngcontent-%COMP%]{background:#3880ff;opacity:1}.no-input-feet[_ngcontent-%COMP%]   .focus-icon[_ngcontent-%COMP%]{color:#3880ff}.input-feet[_ngcontent-%COMP%]{width:100%;height:2px;background:grey;opacity:.5;position:absolute;bottom:5px;transition-property:background,opacity;transition-duration:.2s}.first-size[_ngcontent-%COMP%]{width:85%}.second-size[_ngcontent-%COMP%]{width:75%}"]}),_)},"k+ul":function(e,i,o){"use strict";o.r(i),o.d(i,"Tab3PageModule",(function(){return w}));var a=o("TEn/"),r=o("tyNb"),s=o("ofXK"),l=o("3Pt+"),c=o("mrSG"),b=o("9ybx"),u=o("wYSW"),d=o("fXoL"),p=o("Sy1n"),f=o("sSZD");function m(t,e){1&t&&(d.Lb(0,"ion-title"),d.ic(1," Stonks "),d.Kb())}function h(t,e){1&t&&(d.Lb(0,"ion-title"),d.ic(1," Balence "),d.Kb())}function g(t,e){if(1&t){var n=d.Mb();d.Lb(0,"ion-item",25),d.Tb("click",(function(){d.dc(n);var t=e.$implicit;return d.Vb().goTo(t)})),d.Lb(1,"div",26),d.Lb(2,"ion-label"),d.ic(3),d.Kb(),d.Lb(4,"ion-note",27),d.ic(5," livr\xe9 par "),d.Lb(6,"strong"),d.ic(7),d.Kb(),d.Kb(),d.Kb(),d.Lb(8,"div",28),d.Lb(9,"ion-label"),d.ic(10),d.Kb(),d.Jb(11,"ion-datetime",29),d.Kb(),d.Kb()}if(2&t){var i=e.$implicit;d.yb(3),d.kc(" ",i.title," "),d.yb(4),d.kc(" ",i.name," "),d.yb(3),d.kc(" \u20ac",(i.price*i.quantite).toFixed(2)," "),d.yb(1),d.Zb("value",i.date)}}function v(t,e){if(1&t&&(d.Lb(0,"ion-item",30),d.Lb(1,"div",31),d.Lb(2,"ion-label",32),d.ic(3),d.Kb(),d.Lb(4,"div",33),d.Jb(5,"ion-progress-bar",34),d.Lb(6,"ion-label"),d.ic(7),d.Kb(),d.Jb(8,"ion-progress-bar",35),d.Lb(9,"ion-label",36),d.ic(10),d.Kb(),d.Lb(11,"ion-note",37),d.ic(12,"Somme rapport\xe9"),d.Kb(),d.Lb(13,"ion-note",38),d.ic(14,"Somme gagn\xe9"),d.Kb(),d.Lb(15,"ion-note",39),d.ic(16),d.Kb(),d.Lb(17,"ion-note",40),d.ic(18),d.Kb(),d.Kb(),d.Kb(),d.Kb()),2&t){var n=e.$implicit,i=d.Vb();d.yb(3),d.kc(" ",n.name," "),d.yb(2),d.Zb("value",(i.getPourcent(n.tab.rapport,i.total)/100).toFixed(2)),d.yb(2),d.kc(" ",i.getPourcent(n.tab.rapport,i.total).toFixed(2),"% "),d.yb(1),d.Zb("value",(i.getPourcent(n.tab.total,i.total)/100).toFixed(2)),d.yb(2),d.kc(" ",i.getPourcent(n.tab.total,i.total).toFixed(2),"%"),d.yb(6),d.kc("\u20ac",n.tab.rapport.toFixed(2)," "),d.yb(2),d.kc("\u20ac",n.tab.total.toFixed(2)," ")}}function y(t,e){if(1&t){var n=d.Mb();d.Lb(0,"ion-fab",41),d.Lb(1,"ion-fab-button",42),d.Tb("click",(function(){return d.dc(n),d.Vb().addNewExpModal()})),d.Jb(2,"ion-icon",43),d.Kb(),d.Kb()}}function k(t,e){if(1&t&&(d.Lb(0,"ion-toolbar",44),d.Lb(1,"div",45),d.Lb(2,"ion-note",46),d.ic(3,"MY TOTAL"),d.Kb(),d.Jb(4,"br"),d.Lb(5,"ion-label",47),d.ic(6,"\u20ac -- . --"),d.Kb(),d.Kb(),d.Lb(7,"div",48),d.Lb(8,"ion-note",46),d.ic(9,"TOTAL STONKS"),d.Kb(),d.Jb(10,"br"),d.Lb(11,"ion-label",47),d.ic(12),d.Kb(),d.Kb(),d.Kb()),2&t){var n=d.Vb();d.yb(12),d.kc("\u20ac",n.total.toFixed(2),"")}}function C(t,e){if(1&t){var n=d.Mb();d.Lb(0,"ion-button",49),d.Tb("click",(function(){return d.dc(n),d.Vb().confirmAlert()})),d.Lb(1,"ion-label"),d.ic(2,"D\xe9partager"),d.Kb(),d.Kb()}}var L,O,P,M=((L=function(){function e(n,i,o,a,r,s,l){t(this,e),this.modalController=n,this.app=i,this.afDB=o,this.router=a,this.alertCtrl=r,this.navCtrl=s,this.popoverCtrl=l,this.pageName=!0,this.date=(new Date).toISOString(),this.items=[],this.infos=[],this.total=0,this.charges=0,this.benef=0,this.admin=[{name:"Hugo",tab:{total:0,rapport:0}},{name:"Alexis",tab:{total:0,rapport:0}},{name:"Taheir",tab:{total:0,rapport:0}},{name:"Marvyn",tab:{total:0,rapport:0}},{name:"Gud",tab:{total:0,rapport:0}}],this.segment=0,this.slidesOptions={initialSlide:0,slidesPerView:1,speed:400},this.afDB=this.app.afDB,this.getStonksInFirebase(),this.getItemsFromFirebase()}return n(e,[{key:"segmentChanged",value:function(t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.selectedSlide.slideTo(this.segment);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"slideChanged",value:function(t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.selectedSlide=t,t.getActiveIndex().then((function(t){n.segment=t,0==n.segment?n.pageName=!1:1==n.segment&&(n.pageName=!0)}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"showBenef",value:function(){document.querySelector("#benef").classList.toggle("open")}},{key:"optionsPopover",value:function(t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.popoverCtrl.create({component:u.a,event:t});case 2:return n=e.sent,e.next=5,n.present();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"addNewExpModal",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:b.a,componentProps:{afDB:this.afDB},cssClass:"my-custom-class"});case 2:return e=t.sent,t.next=5,e.present();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"goTo",value:function(t){for(var e,n=[],i=0,o=Object.keys(this.infos);i<o.length;i++){var a=o[i];if(t.title==this.infos[a].title){if(null!=this.infos[a].formuleContent)for(var r=0,s=Object.keys(this.infos[a].formuleContent);r<s.length;r++)for(var l=s[r],c=0,b=Object.keys(this.infos);c<b.length;c++){var u=b[c];this.infos[u].title!=this.infos[a].formuleContent[l].title||this.infos[u].formule||n.push({tab:this.infos[u],quantite:this.infos[a].formuleContent[l].quantite})}0==n.length&&(e=[]).push({key:this.infos[a].key,quantite:this.infos[a].quantite})}}this.navCtrl.navigateForward("/tabs/tab3/edit",{queryParams:{item:t,infoProduit:e,infoFormule:n}})}},{key:"confirmAlert",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertCtrl.create({cssClass:"my-custom-class",header:"Confirmer",message:"Voulez-vous vraiment r\xe9partir le montant total avec tout le monde ?",buttons:[{text:"Annuler",role:"Cancel"},{text:"Confirmer",handler:function(){console.log("ok")}}]});case 2:return e=t.sent,t.next=5,e.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"getFuelPrice",value:function(t){var e=2;return t>15?e+=1*(t-15)/7:0==t&&(e=0),e}},{key:"getPourcent",value:function(t,e){return 0==e&&(e=1),t/e*100}},{key:"getStonksInFirebase",value:function(){var t=this;this.afDB.list("Livraisons/").snapshotChanges(["child_added","child_removed","child_changed"]).subscribe((function(e){t.items=[],t.total=0,t.charges=0;for(var n=0,i=Object.keys(t.admin);n<i.length;n++){var o=i[n];t.admin[o].tab.rapport=0,t.admin[o].tab.total=0}e.forEach((function(e){var n=e.payload.exportVal();t.total=t.total+ +n.price*n.quantite;for(var i=0,o=Object.keys(t.admin);i<o.length;i++){var a=o[i];t.admin[a].name==n.name&&(t.admin[a].tab.rapport=t.admin[a].tab.rapport+ +n.price*n.quantite,t.admin[a].tab.total=t.admin[a].tab.total+ +n.firstPrice*n.quantite+t.getFuelPrice(+n.distance),t.charges=t.charges+ +n.firstPrice*n.quantite+t.getFuelPrice(+n.distance))}t.items.push({key:e.key,title:n.title,price:n.price,firstPrice:n.firstPrice,name:n.name,date:n.date,km:n.distance,quantite:n.quantite,clientName:n.clientName,type:n.type,keyProduit:n.key})}));for(var a=0,r=Object.keys(t.admin);a<r.length;a++){var s=r[a];t.admin[s].tab.total=t.admin[s].tab.total+(t.total-t.charges)/5}t.benef=t.total-t.charges}))}},{key:"getItemsFromFirebase",value:function(){var t=this;this.afDB.list("produits/").snapshotChanges(["child_added","child_moved","child_changed"]).subscribe((function(e){t.infos=[],e.forEach((function(e){var n=e.payload.exportVal();t.infos.push({key:e.key,title:n.name,quantite:n.stock,formule:n.formule,formuleContent:n.formuleContent})}))}))}}]),e}()).\u0275fac=function(t){return new(t||L)(d.Ib(a.X),d.Ib(p.a),d.Ib(f.a),d.Ib(r.g),d.Ib(a.a),d.Ib(a.Y),d.Ib(a.bb))},L.\u0275cmp=d.Cb({type:L,selectors:[["app-tab3"]],decls:35,vars:13,consts:[["mode","ios",3,"translucent"],[4,"ngIf"],["slot","end","fill","clear",1,"toolbar-button",3,"click"],["name","ellipsis-vertical"],["id","stats-content",3,"fullscreen"],[3,"ngModel","ngModelChange","ionChange"],["value","0"],["name","reader"],["value","1"],["name","swap-horizontal"],["id","content",3,"options","ionSlideDidChange","ionSlidesDidLoad"],["slides",""],["id","Stonks-page"],["lines","full"],["button","","detail","false","routerDirection","forward",3,"click",4,"ngFor","ngForOf"],["id","balence-page"],["mode","md","button","","lines","none",2,"height","50px",3,"click"],["size","large",2,"text-align","center"],["id","benef","lines","none"],[2,"text-align","center"],["button","","detail","false","color","light",4,"ngFor","ngForOf"],["id","bottom-item"],["id","tricount-add","vertical","bottom","horizontal","center",4,"ngIf"],["id","tricount-toolbar",4,"ngIf"],["color","light","expand","full",3,"click",4,"ngIf"],["button","","detail","false","routerDirection","forward",3,"click"],["slot","start"],["slot","end",2,"font-size","12pt"],["slot","end",2,"text-align","right"],["disabled","","displayFormat","MM/DD/YYYY",3,"value"],["button","","detail","false","color","light"],[1,"item-content"],[1,"label"],[1,"progress-bar"],["slot","start","color","warning","reversed","true",3,"value"],[1,"right",2,"position","absolute",3,"value"],[1,"right"],[1,"up"],[1,"right","up"],[1,"down"],[1,"right","down"],["id","tricount-add","vertical","bottom","horizontal","center"],[3,"click"],["name","add"],["id","tricount-toolbar"],["slot","start",2,"text-align","left"],[2,"font-size","small"],[2,"font-size","small","font-weight","bold"],["slot","end"],["color","light","expand","full",3,"click"]],template:function(t,e){if(1&t){var n=d.Mb();d.Lb(0,"ion-header",0),d.Lb(1,"ion-toolbar"),d.hc(2,m,2,0,"ion-title",1),d.hc(3,h,2,0,"ion-title",1),d.Lb(4,"ion-button",2),d.Tb("click",(function(t){return e.optionsPopover(t)})),d.Jb(5,"ion-icon",3),d.Kb(),d.Kb(),d.Kb(),d.Lb(6,"ion-content",4),d.Lb(7,"ion-segment",5),d.Tb("ngModelChange",(function(t){return e.segment=t}))("ionChange",(function(t){return e.segmentChanged(t)})),d.Lb(8,"ion-segment-button",6),d.Jb(9,"ion-icon",7),d.Lb(10,"ion-label"),d.ic(11,"Stonks"),d.Kb(),d.Kb(),d.Lb(12,"ion-segment-button",8),d.Jb(13,"ion-icon",9),d.Lb(14,"ion-label"),d.ic(15,"Balence"),d.Kb(),d.Kb(),d.Kb(),d.Lb(16,"ion-slides",10,11),d.Tb("ionSlideDidChange",(function(){d.dc(n);var t=d.cc(17);return e.slideChanged(t)}))("ionSlidesDidLoad",(function(){d.dc(n);var t=d.cc(17);return e.slideChanged(t)})),d.Lb(18,"ion-slide",12),d.Lb(19,"ion-list",13),d.hc(20,g,12,4,"ion-item",14),d.Kb(),d.Kb(),d.Lb(21,"ion-slide",15),d.Lb(22,"ion-list",13),d.Lb(23,"ion-item",16),d.Tb("click",(function(){return e.showBenef()})),d.Lb(24,"ion-title",17),d.ic(25),d.Kb(),d.Kb(),d.Lb(26,"ion-item",18),d.Lb(27,"ion-title",19),d.ic(28),d.Kb(),d.Kb(),d.hc(29,v,19,7,"ion-item",20),d.Jb(30,"ion-item-divider",21),d.Kb(),d.Kb(),d.Kb(),d.Kb(),d.hc(31,y,3,0,"ion-fab",22),d.Lb(32,"ion-footer"),d.hc(33,k,13,1,"ion-toolbar",23),d.hc(34,C,3,0,"ion-button",24),d.Kb()}2&t&&(d.Yb("translucent",!0),d.yb(2),d.Yb("ngIf",!e.pageName),d.yb(1),d.Yb("ngIf",e.pageName),d.yb(3),d.Yb("fullscreen",!0),d.yb(1),d.Yb("ngModel",e.segment),d.yb(9),d.Yb("options",e.slidesOptions),d.yb(4),d.Yb("ngForOf",e.items),d.yb(5),d.kc(" Total : \u20ac",e.total.toFixed(2)," "),d.yb(3),d.kc(" B\xe9n\xe9fice : \u20ac",e.benef.toFixed(2)," "),d.yb(1),d.Yb("ngForOf",e.admin),d.yb(2),d.Yb("ngIf",!e.pageName),d.yb(2),d.Yb("ngIf",!e.pageName),d.yb(1),d.Yb("ngIf",e.pageName))},directives:[a.p,a.U,s.i,a.d,a.q,a.k,a.K,a.db,l.d,l.e,a.L,a.z,a.N,a.M,a.A,s.h,a.t,a.S,a.u,a.o,a.C,a.l,a.D,a.m,a.n],styles:[".small-margin[_ngcontent-%COMP%]{margin:10px}.toolbar-button[_ngcontent-%COMP%]{--color:#000;margin:0 10px;--padding-start:0;--padding-end:0}ion-content[_ngcontent-%COMP%]{--overflow:hidden}ion-slide[_ngcontent-%COMP%]{overflow:scroll}#content[_ngcontent-%COMP%]{height:100%}#content[_ngcontent-%COMP%]   ion-slide[_ngcontent-%COMP%]{display:block}#Stonks-page[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-top:5px;--padding-bottom:5px}#Stonks-page[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-bottom:5px}#Stonks-page[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-datetime[_ngcontent-%COMP%]{font-size:small;--padding-end:0;--padding-start:0;--padding-top:0;--padding-bottom:0}#balence-page[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start:0;--pading-end:0}#balence-page[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]{width:100%;padding:10px 0}#balence-page[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:15px}#balence-page[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{text-align:center;font-weight:700}#balence-page[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{display:flex;width:100%;padding-bottom:20px}#balence-page[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   ion-progress-bar[_ngcontent-%COMP%]{width:50%;height:20px}#balence-page[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{position:absolute;bottom:15px}#balence-page[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:small;position:absolute;margin:5px}#balence-page[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .up[_ngcontent-%COMP%]{bottom:55px}#balence-page[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .down[_ngcontent-%COMP%]{bottom:0}#balence-page[_ngcontent-%COMP%]   .item-content[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{right:0}#balence-page[_ngcontent-%COMP%]   #bottom-item[_ngcontent-%COMP%]{--background:#fff}.ios[_ngcontent-%COMP%]   #bottom-item[_ngcontent-%COMP%]{height:50px}.md[_ngcontent-%COMP%]   #bottom-item[_ngcontent-%COMP%]{height:65px}#benef[_ngcontent-%COMP%]{height:0;transition-property:height;transition-duration:.2s}.open[_ngcontent-%COMP%]{height:50px!important}"]}),L),K=o("qtYk"),x=[{path:"",component:M},{path:"edit",loadChildren:function(){return o.e(16).then(o.bind(null,"xhSr")).then((function(t){return t.EditPageModule}))}}],_=((P=function e(){t(this,e)}).\u0275mod=d.Gb({type:P}),P.\u0275inj=d.Fb({factory:function(t){return new(t||P)},imports:[[r.i.forChild(x)]]}),P),w=((O=function e(){t(this,e)}).\u0275mod=d.Gb({type:O}),O.\u0275inj=d.Fb({factory:function(t){return new(t||O)},imports:[[a.V,s.b,l.a,K.a,r.i.forChild([{path:"",component:M}]),_]]}),O)}}])}();