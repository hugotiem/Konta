(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"+f7T":function(t,i,e){"use strict";e.d(i,"a",(function(){return v}));var n=e("mrSG"),o=e("fXoL"),s=e("TEn/"),l=e("3Pt+");let r=(()=>{class t{constructor(t){this.modalCtrl=t,this.disabled=!1,this.stop=!1}ngOnInit(){1==this.quantite&&(this.disabled=!0),this.max==this.quantite&&(this.stop=!0)}close(t){t?this.modalCtrl.dismiss({quantite:this.quantite}):this.modalCtrl.dismiss()}add(){this.quantite++,this.disabled=!1,-1!=this.max&&this.quantite==this.max&&(this.stop=!0)}remove(){this.quantite>1&&(this.quantite--,1==this.quantite&&(this.disabled=!0)),this.stop=!1}}return t.\u0275fac=function(i){return new(i||t)(o.Ib(s.X))},t.\u0275cmp=o.Cb({type:t,selectors:[["app-quantite"]],inputs:{quantite:"quantite",max:"max"},decls:21,vars:4,consts:[["fill","clear",3,"click"],["slot","end","fill","clear",3,"click"],["id","card-modal",2,"--overflow","hidden"],[2,"text-align","center","font-size","25pt","margin","0"],["lines","none",2,"--padding-top","15%","--padding-start","20%","--padding-end","20%","--inner-padding-end","0"],["fill","clear","size","large",2,"margin","0","--padding-start","0","--padding-end","0","--color","black",3,"disabled","click"],[1,"plus-button",2,"margin","0"],["div",""],["name","remove",2,"font-size","30pt","margin","0"],["slot","end","fill","clear","size","large",2,"margin","0","--padding-start","0","--padding-end","0","--color","black",3,"disabled","click"],["name","add",2,"font-size","30pt","margin","0"],["id","number","readonly","","type","text",3,"ngModel","value","ngModelChange"]],template:function(t,i){1&t&&(o.Lb(0,"ion-toolbar"),o.Lb(1,"ion-button",0),o.Tb("click",(function(){return i.close(!1)})),o.Lb(2,"ion-label"),o.ic(3,"Annuler"),o.Kb(),o.Kb(),o.Lb(4,"ion-button",1),o.Tb("click",(function(){return i.close(!0)})),o.Lb(5,"ion-label"),o.ic(6,"Valider"),o.Kb(),o.Kb(),o.Kb(),o.Lb(7,"ion-content",2),o.Lb(8,"h1",3),o.Lb(9,"strong"),o.ic(10,"Quantit\xe9"),o.Kb(),o.Kb(),o.Lb(11,"ion-item",4),o.Lb(12,"ion-button",5),o.Tb("click",(function(){return i.remove()})),o.Lb(13,"div",6,7),o.Jb(15,"ion-icon",8),o.Kb(),o.Kb(),o.Lb(16,"ion-button",9),o.Tb("click",(function(){return i.add()})),o.Lb(17,"div",6,7),o.Jb(19,"ion-icon",10),o.Kb(),o.Kb(),o.Kb(),o.Lb(20,"ion-input",11),o.Tb("ngModelChange",(function(t){return i.quantite=t})),o.Kb(),o.Kb()),2&t&&(o.yb(12),o.Yb("disabled",i.disabled),o.yb(4),o.Yb("disabled",i.stop),o.yb(4),o.Yb("ngModel",i.quantite)("value",i.quantite))},directives:[s.U,s.d,s.z,s.k,s.t,s.q,s.s,s.eb,l.d,l.e],styles:["ion-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative;height:50px;width:50px;border-radius:25px;background:#dfdfdf}ion-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}#number[_ngcontent-%COMP%]{--padding-start:0;--padding-end:0;position:absolute;top:40%;left:50%;width:30%;text-align:center;transform:translate(-50%);font-size:30pt;z-index:1000000}ion-button.ion-activated[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background:#737373!important}"]}),t})(),c=(()=>{class t{constructor(t){this.popoverCtrl=t}ngOnInit(){}produit(){return Object(n.a)(this,void 0,void 0,(function*(){yield this.popoverCtrl.dismiss({formule:!1})}))}formule(){return Object(n.a)(this,void 0,void 0,(function*(){yield this.popoverCtrl.dismiss({formule:!0})}))}}return t.\u0275fac=function(i){return new(i||t)(o.Ib(s.bb))},t.\u0275cmp=o.Cb({type:t,selectors:[["app-options"]],decls:7,vars:0,consts:[["button","","mode","ios","detail","false","lines","full",3,"click"],["button","","mode","ios","detail","false","lines","none",3,"click"]],template:function(t,i){1&t&&(o.Lb(0,"ion-list"),o.Lb(1,"ion-item",0),o.Tb("click",(function(){return i.produit()})),o.Lb(2,"ion-label"),o.ic(3,"Produit"),o.Kb(),o.Kb(),o.Lb(4,"ion-item",1),o.Tb("click",(function(){return i.formule()})),o.Lb(5,"ion-label"),o.ic(6,"Formule"),o.Kb(),o.Kb(),o.Kb())},directives:[s.A,s.t,s.z],styles:[""]}),t})();var b=e("sSZD"),a=e("ofXK");function d(t,i){if(1&t){const t=o.Mb();o.Lb(0,"ion-item",3),o.Tb("click",(function(i){o.dc(t);const e=o.Vb().$implicit;return o.Vb().saveItemsInFormule(i,e)})),o.Lb(1,"ion-label"),o.ic(2),o.Kb(),o.Jb(3,"ion-radio",4),o.Kb()}if(2&t){const t=o.Vb().$implicit;o.yb(2),o.kc(" ",t.title," ")}}function u(t,i){if(1&t&&(o.Lb(0,"div"),o.hc(1,d,4,1,"ion-item",2),o.Kb()),2&t){const t=i.$implicit;o.yb(1),o.Yb("ngIf",!t.alreadyUsed)}}let m=(()=>{class t{constructor(t,i){this.popoverCtrl=t,this.afDB=i,this.items=[],this.new=!0,this.last=!1,this.getItemsFromFireBase()}ngOnInit(){null==this.formule&&(this.formule=[])}close(t){return Object(n.a)(this,void 0,void 0,(function*(){this.popoverCtrl.dismiss({formule:t.title,formuleFirstPrice:t.firstPrice,quantite:t.quantite,key:t.key,last:this.last})}))}saveItemsInFormule(t,i){this.close(i)}getItemsFromFireBase(){this.afDB.list("produits/").snapshotChanges(["child_added","child_removed","child_changed"]).subscribe(t=>{this.items=[],t.forEach(t=>{let i=t.payload.exportVal();i.formule||this.items.push({key:t.key,title:i.name,firstPrice:i.firstPrice,quantite:i.stock,alreadyUsed:!1})});let i=0;for(let e of Object.keys(this.items))for(let t of Object.keys(this.formule))this.formule[t].title==this.items[e].title&&(this.items[e].alreadyUsed=!0,i++);i+1==this.items.length&&(this.last=!0)})}}return t.\u0275fac=function(i){return new(i||t)(o.Ib(s.bb),o.Ib(b.a))},t.\u0275cmp=o.Cb({type:t,selectors:[["app-produits-list"]],inputs:{formule:"formule"},decls:3,vars:1,consts:[["lines","full"],[4,"ngFor","ngForOf"],["mode","ios","lines","none","style","width: 100%;",3,"click",4,"ngIf"],["mode","ios","lines","none",2,"width","100%",3,"click"],["slot","end","color","primary"]],template:function(t,i){1&t&&(o.Lb(0,"ion-list",0),o.Lb(1,"ion-radio-group"),o.hc(2,u,2,1,"div",1),o.Kb(),o.Kb()),2&t&&(o.yb(2),o.Yb("ngForOf",i.items))},directives:[s.A,s.F,s.db,a.h,a.i,s.t,s.z,s.E,s.cb],styles:[""]}),t})();function f(t,i){1&t&&(o.Lb(0,"ion-label"),o.ic(1,"Ajouter"),o.Kb())}function h(t,i){1&t&&(o.Lb(0,"ion-label"),o.ic(1,"Save"),o.Kb())}function p(t,i){if(1&t){const t=o.Mb();o.Lb(0,"ion-item-sliding",null,22),o.Lb(2,"ion-item",23),o.Tb("click",(function(e){o.dc(t);const n=i.index;return o.Vb(2).openProduitsList(e,n)})),o.Lb(3,"ion-note",24),o.ic(4),o.Kb(),o.Lb(5,"ion-label"),o.ic(6),o.Kb(),o.Jb(7,"span",10),o.Jb(8,"ion-icon",25),o.Kb(),o.Lb(9,"ion-item-options",26),o.Tb("click",(function(){o.dc(t);const e=i.index,n=o.cc(1);return o.Vb(2).delete(e,n)})),o.Lb(10,"ion-item-option",27),o.Jb(11,"ion-icon",28),o.Kb(),o.Kb(),o.Lb(12,"ion-item",29),o.Tb("click",(function(){o.dc(t);const e=i.index,n=i.$implicit;return o.Vb(2).openQuantityModal("qte-"+e+"-item",n)})),o.Lb(13,"ion-note"),o.ic(14,"Quantit\xe9 : "),o.Kb(),o.Lb(15,"ion-label",12),o.ic(16),o.Kb(),o.Jb(17,"span",10),o.Jb(18,"ion-icon",25),o.Kb(),o.Kb()}if(2&t){const t=i.$implicit,e=i.index;o.yb(2),o.ac("id","formule-",e,"-item"),o.yb(2),o.kc("Item ",e+1," : "),o.yb(2),o.kc(" ",t.title," "),o.yb(6),o.ac("id","qte-",e,"-item"),o.yb(4),o.kc(" ",t.quantite," ")}}function g(t,i){if(1&t){const t=o.Mb();o.Lb(0,"ion-list"),o.hc(1,p,19,5,"ion-item-sliding",19),o.Lb(2,"ion-item"),o.Lb(3,"ion-button",20),o.Tb("click",(function(){return o.dc(t),o.Vb().addItems()})),o.Jb(4,"ion-icon",21),o.Lb(5,"ion-label"),o.ic(6,"Ajouter item"),o.Kb(),o.Kb(),o.Kb(),o.Kb()}if(2&t){const t=o.Vb();o.yb(1),o.Yb("ngForOf",t.formuleContent)}}function y(t,i){if(1&t){const t=o.Mb();o.Lb(0,"ion-item",30),o.Tb("click",(function(){return o.dc(t),o.Vb().openQuantityModal("modal",void 0)})),o.Lb(1,"ion-note"),o.ic(2,"Qantit\xe9 : "),o.Kb(),o.Lb(3,"ion-label",31),o.ic(4),o.Kb(),o.Jb(5,"ion-icon",25),o.Jb(6,"span",10),o.Kb()}if(2&t){const t=o.Vb();o.yb(4),o.jc(t.stock)}}function k(t,i){1&t&&(o.Lb(0,"ion-item",32),o.Lb(1,"ion-label",33),o.ic(2,"*Veuillez remplir tous les champs"),o.Kb(),o.Kb())}let v=(()=>{class t{constructor(t,i){this.modalCtrl=t,this.popoverCtrl=i,this.stock=1,this.error=!1,this.isAlreadySaved=!1,this.disabledForFormule=!1,this.formuleContent=[],this.index=1,this.last=!1}ngOnInit(){if(null!=this.item){if(this.title=this.item.name,this.category=this.item.category,this.price=this.item.price,this.firstPrice=this.item.firstPrice,this.formule=this.item.formule,this.stock=this.item.stock,null!=this.item.formuleContent){let t=[];for(let i of Object.keys(this.item.formuleContent))t.push({firstPrice:this.item.formuleContent[i].firstPrice,key:this.item.formuleContent[i].key,max:this.item.formuleContent[i].max,quantite:this.item.formuleContent[i].quantite,title:this.item.formuleContent[i].title});this.formuleContent=t}this.isAlreadySaved=!0}else this.category="Produit";null==this.formule?this.formule=!1:this.disabledForFormule=this.formule,0==this.formuleContent.length&&(this.formuleContent=[{title:"",firstPrice:0,quantite:1,max:-1,key:""}])}close(t){return Object(n.a)(this,void 0,void 0,(function*(){yield this.modalCtrl.dismiss({item:t})}))}openOptionsPopover(t){return Object(n.a)(this,void 0,void 0,(function*(){const i=yield this.popoverCtrl.create({component:c,event:t,mode:"md"});return i.onWillDismiss().then(t=>{this.formule=t.data.formule,this.formule?("Formule"!=this.category&&(this.firstPrice=0),this.category="Formule",this.disabledForFormule=!0):(this.category="Produit",this.disabledForFormule=!1)}),yield i.present()}))}isFormuleEmpty(){return null==this.formuleContent||0==this.formuleContent.length}openProduitsList(t,i){return Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.popoverCtrl.create({component:m,componentProps:{formule:this.formuleContent},event:t,mode:"md"});if(document.querySelector("#formule-"+i+"-item").classList.toggle("no-input-feet"),e.onWillDismiss().then(t=>{if(document.querySelector("#formule-"+i+"-item").classList.toggle("no-input-feet"),null!=t.data.formule){this.formuleContent[i].firstPrice=t.data.formuleFirstPrice,this.formuleContent[i].title=t.data.formule,this.formuleContent[i].max=t.data.quantite,this.formuleContent[i].key=t.data.key;let e=0;for(let t of Object.keys(this.formuleContent))e+=this.formuleContent[t].firstPrice;this.firstPrice=e}this.last=t.data.last}),!this.last)return yield e.present()}))}addItems(){this.formuleContent.push({title:"",firstPrice:0,quantite:1,max:-1,key:""})}delete(t,i){return Object(n.a)(this,void 0,void 0,(function*(){this.firstPrice=this.firstPrice-this.formuleContent[t].firstPrice,this.formuleContent.splice(t,1),yield i.close()}))}openQuantityModal(t,i){return Object(n.a)(this,void 0,void 0,(function*(){let e,n;this.formule?(e=i.quantite,n=i.max):(e=this.stock,n=-1);const o=yield this.modalCtrl.create({component:r,componentProps:{quantite:e,max:n},cssClass:"quantite-class",swipeToClose:!0,mode:"ios"});return document.querySelector("#"+t).classList.toggle("no-input-feet"),o.onWillDismiss().then(e=>{void 0!==e.data&&(null!=i?(this.firstPrice=null!=i.quantite&&i.quantite>e.data.quantite?this.firstPrice-(i.quantite-e.data.quantite)*i.firstPrice:this.firstPrice+(e.data.quantite-1)*i.firstPrice,i.quantite=e.data.quantite):this.stock=e.data.quantite),document.querySelector("#"+t).classList.toggle("no-input-feet")}),yield o.present()}))}update(){let t=[];for(let i of Object.keys(this.formuleContent))""!=this.formuleContent[i].title&&t.push(this.formuleContent[i]);this.formuleContent=t,this.empty(this.title)||this.empty(this.category)||this.empty(this.price)||this.empty(this.stock)||this.empty(this.firstPrice)?this.error=!0:this.isAlreadySaved?(this.modifyValueInFirebase(),this.close(this.item)):(this.addItemToFirebase(),this.close(void 0))}addItemToFirebase(){this.afBD.list("produits").push({name:this.title,category:this.category,price:this.price,firstPrice:this.firstPrice,stock:this.stock,formule:this.formule,formuleContent:this.formuleContent,disponible:!0})}modifyValueInFirebase(){this.afBD.object("produits/"+this.item.key+"/name/").set(this.title),this.afBD.object("produits/"+this.item.key+"/category/").set(this.category),this.afBD.object("produits/"+this.item.key+"/price/").set(this.price),this.afBD.object("produits/"+this.item.key+"/stock/").set(this.stock),this.afBD.object("produits/"+this.item.key+"/firstPrice/").set(this.firstPrice),this.afBD.object("produits/"+this.item.key+"/formule/").set(this.formule),this.afBD.object("produits/"+this.item.key+"/formuleContent").set(this.formuleContent)}empty(t){return null==t}}return t.\u0275fac=function(i){return new(i||t)(o.Ib(s.X),o.Ib(s.bb))},t.\u0275cmp=o.Cb({type:t,selectors:[["app-add"]],inputs:{item:"item",afBD:"afBD"},decls:41,vars:10,consts:[[1,"ion-no-border"],["fill","clear","slot","start",3,"click"],["slot","end","fill","clear",3,"click"],[4,"ngIf"],["size","large"],["slot","end","fill","clear",2,"--color","black",3,"click"],["name","chevron-down"],["lines","none",1,"content"],["mode","ios"],["type","text","placeholder","Title",3,"ngModel","ngModelChange"],[1,"input-feet"],["mode","ios","disabled",""],["slot","end",2,"text-align","end"],["type","number","placeholder","prix \xe0 l'achat",3,"disabled","ngModel","ngModelChange"],[1,"input-feet","second-size"],["size","small","name","chevron-down"],["type","number","placeholder","prix \xe0 la revente",3,"ngModel","ngModelChange"],["button","","id","modal","detail","false",3,"click",4,"ngIf"],["lines","none",4,"ngIf"],[4,"ngFor","ngForOf"],["fill","clear","expand","block",3,"click"],["name","add","slot","start"],["slide",""],[1,"items",3,"id","click"],["slot","start"],["name","chevron-down","size","small","slot","end",1,"focus-icon"],["side","end",2,"width","70px",3,"click"],["color","danger",2,"width","100%"],["name","trash",2,"position","absolute","top","25%","right","50%","transform","translate(50%, -50%)"],["lines","full",3,"id","click"],["button","","id","modal","detail","false",3,"click"],["slot","end",2,"text-align","right"],["lines","none"],["color","danger",2,"font-size","10pt"]],template:function(t,i){1&t&&(o.Lb(0,"ion-header",0),o.Lb(1,"ion-toolbar"),o.Lb(2,"ion-button",1),o.Tb("click",(function(){return i.close(void 0)})),o.Lb(3,"ion-label"),o.ic(4,"Annuler"),o.Kb(),o.Kb(),o.Lb(5,"ion-title"),o.ic(6,"Nouveau"),o.Kb(),o.Lb(7,"ion-button",2),o.Tb("click",(function(){return i.update()})),o.hc(8,f,2,0,"ion-label",3),o.hc(9,h,2,0,"ion-label",3),o.Kb(),o.Kb(),o.Kb(),o.Lb(10,"ion-content"),o.Lb(11,"ion-toolbar"),o.Lb(12,"ion-title",4),o.ic(13,"Ajouter item"),o.Kb(),o.Lb(14,"ion-button",5),o.Tb("click",(function(t){return i.openOptionsPopover(t)})),o.Jb(15,"ion-icon",6),o.Kb(),o.Kb(),o.Lb(16,"ion-list",7),o.Lb(17,"ion-item",8),o.Lb(18,"ion-input",9),o.Tb("ngModelChange",(function(t){return i.title=t})),o.Kb(),o.Jb(19,"span",10),o.Kb(),o.hc(20,g,7,1,"ion-list",3),o.Lb(21,"ion-item",11),o.Lb(22,"ion-label"),o.ic(23,"Cat\xe9gorie : "),o.Kb(),o.Lb(24,"ion-label",12),o.ic(25),o.Kb(),o.Jb(26,"span",10),o.Kb(),o.Lb(27,"ion-item",8),o.Lb(28,"ion-input",13),o.Tb("ngModelChange",(function(t){return i.firstPrice=t})),o.Kb(),o.Jb(29,"span",14),o.Lb(30,"ion-label"),o.ic(31,"EUR"),o.Kb(),o.Jb(32,"ion-icon",15),o.Kb(),o.Lb(33,"ion-item",8),o.Lb(34,"ion-input",16),o.Tb("ngModelChange",(function(t){return i.price=t})),o.Kb(),o.Jb(35,"span",14),o.Lb(36,"ion-label"),o.ic(37,"EUR"),o.Kb(),o.Jb(38,"ion-icon",15),o.Kb(),o.hc(39,y,7,1,"ion-item",17),o.hc(40,k,3,0,"ion-item",18),o.Kb(),o.Kb()),2&t&&(o.yb(8),o.Yb("ngIf",!i.isAlreadySaved),o.yb(1),o.Yb("ngIf",i.isAlreadySaved),o.yb(9),o.Yb("ngModel",i.title),o.yb(2),o.Yb("ngIf",i.formule),o.yb(5),o.kc(" ",i.category," "),o.yb(3),o.Yb("disabled",i.disabledForFormule)("ngModel",i.firstPrice),o.yb(6),o.Yb("ngModel",i.price),o.yb(5),o.Yb("ngIf",!i.formule),o.yb(1),o.Yb("ngIf",i.error))},directives:[s.p,s.U,s.d,s.z,s.S,a.i,s.k,s.q,s.A,s.t,s.s,s.eb,l.d,l.e,s.Z,a.h,s.y,s.C,s.x,s.w],styles:[".content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-top:10px;--padding-bottom:10px;--padding-end:20px}.focus-icon[_ngcontent-%COMP%]{margin-right:0}.item-has-focus[_ngcontent-%COMP%]   .input-feet[_ngcontent-%COMP%]{background:#3880ff;opacity:1}.item-has-focus[_ngcontent-%COMP%]   .focus-icon[_ngcontent-%COMP%]{color:#3880ff}.no-input-feet[_ngcontent-%COMP%]   .input-feet[_ngcontent-%COMP%]{background:#3880ff;opacity:1}.no-input-feet[_ngcontent-%COMP%]   .focus-icon[_ngcontent-%COMP%]{color:#3880ff}.input-feet[_ngcontent-%COMP%]{width:100%;height:2px;background:grey;opacity:.5;position:absolute;bottom:5px;transition-property:background,opacity;transition-duration:.2s}.first-size[_ngcontent-%COMP%]{width:85%}.second-size[_ngcontent-%COMP%]{width:75%}.items[_ngcontent-%COMP%]{position:relative}.items[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{position:absolute;z-index:10000}"]}),t})()},TUkU:function(t,i,e){"use strict";e.r(i),e.d(i,"Tab2PageModule",(function(){return x}));var n=e("TEn/"),o=e("ofXK"),s=e("3Pt+"),l=e("qtYk"),r=e("tyNb"),c=e("mrSG"),b=e("fXoL");function a(t,i){1&t&&b.Jb(0,"ion-icon",5)}function d(t,i){1&t&&b.Jb(0,"ion-icon",6)}function u(t,i){if(1&t&&(b.Lb(0,"ion-item"),b.Lb(1,"ion-label",1),b.ic(2),b.Kb(),b.hc(3,a,1,0,"ion-icon",2),b.hc(4,d,1,0,"ion-icon",3),b.Jb(5,"ion-radio",4),b.Kb()),2&t){const t=i.$implicit;b.yb(2),b.kc(" ",t.name," "),b.yb(1),b.Yb("ngIf","asc-stock"==t.value),b.yb(1),b.Yb("ngIf","desc-stock"==t.value),b.yb(1),b.Zb("value",t.value)}}let m=(()=>{class t{constructor(){this.items=[{name:"Cat\xe9gorie",value:"category"},{name:"Quantit\xe9",value:"asc-stock"},{name:"Quantit\xe9",value:"desc-stock"},{name:"A - Z",value:"asc"},{name:"Prix",value:"price"}]}ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=b.Cb({type:t,selectors:[["app-popover"]],decls:6,vars:1,consts:[[4,"ngFor","ngForOf"],[2,"font-size","12pt"],["slot","end","size","small","name","arrow-up",4,"ngIf"],["slot","end","size","small","name","arrow-down",4,"ngIf"],["color","primary","slot","end",3,"value"],["slot","end","size","small","name","arrow-up"],["slot","end","size","small","name","arrow-down"]],template:function(t,i){1&t&&(b.Lb(0,"ion-list"),b.Lb(1,"ion-radio-group"),b.Lb(2,"ion-list-header"),b.Lb(3,"ion-label"),b.ic(4,"Trier par :"),b.Kb(),b.Kb(),b.hc(5,u,6,4,"ion-item",0),b.Kb(),b.Kb()),2&t&&(b.yb(5),b.Yb("ngForOf",i.items))},directives:[n.A,n.F,n.db,n.B,n.z,o.h,n.t,o.i,n.E,n.cb,n.q],styles:[""]}),t})();var f=e("+f7T"),h=e("wYSW"),p=e("Sy1n"),g=e("sSZD");function y(t,i){if(1&t&&(b.Lb(0,"ion-chip",21),b.Lb(1,"ion-label"),b.ic(2),b.Kb(),b.Kb()),2&t){const t=b.Vb(2).$implicit;b.yb(2),b.kc(" ",t.stock," ")}}function k(t,i){if(1&t&&(b.Lb(0,"ion-chip",22),b.Lb(1,"ion-label"),b.ic(2),b.Kb(),b.Kb()),2&t){const t=b.Vb(2).$implicit;b.yb(2),b.kc(" ",t.stock," ")}}function v(t,i){if(1&t){const t=b.Mb();b.Lb(0,"ion-item",15),b.Tb("click",(function(){b.dc(t);const i=b.Vb().$implicit;return b.Vb().goToEdit(i)})),b.Lb(1,"ion-thumbnail"),b.Jb(2,"img",16),b.Kb(),b.Lb(3,"div"),b.Lb(4,"ion-label",17),b.ic(5),b.Kb(),b.Lb(6,"ion-label",18),b.ic(7),b.Kb(),b.Lb(8,"ion-note"),b.ic(9),b.Kb(),b.Kb(),b.hc(10,y,3,1,"ion-chip",19),b.hc(11,k,3,1,"ion-chip",20),b.Kb()}if(2&t){const t=b.Vb().$implicit;b.yb(5),b.kc(" ",t.name," "),b.yb(2),b.kc(" ",t.category," "),b.yb(2),b.kc(" ",t.price," \u20ac"),b.yb(1),b.Yb("ngIf",0==t.stock),b.yb(1),b.Yb("ngIf",0!=t.stock)}}function L(t,i){if(1&t){const t=b.Mb();b.Lb(0,"ion-item-sliding"),b.hc(1,v,12,5,"ion-item",11),b.Lb(2,"ion-item-options",12),b.Lb(3,"ion-item-option",13),b.Tb("click",(function(){b.dc(t);const e=i.$implicit;return b.Vb().delete(e)})),b.Jb(4,"ion-icon",14),b.Kb(),b.Kb(),b.Kb()}if(2&t){const t=i.$implicit;b.yb(1),b.Yb("ngIf",!t.formule)}}function C(t,i){1&t&&(b.Lb(0,"ion-note",27),b.ic(1,"Disponible"),b.Kb())}function K(t,i){1&t&&(b.Lb(0,"ion-note",28),b.ic(1,"Indisponible"),b.Kb())}function P(t,i){if(1&t){const t=b.Mb();b.Lb(0,"ion-item",24),b.Tb("click",(function(){b.dc(t);const i=b.Vb().$implicit;return b.Vb().goToEdit(i)})),b.Lb(1,"ion-thumbnail"),b.Jb(2,"img",16),b.Kb(),b.Lb(3,"div"),b.Lb(4,"ion-label",17),b.ic(5),b.Kb(),b.Lb(6,"ion-label",18),b.ic(7),b.Kb(),b.Lb(8,"ion-note"),b.ic(9),b.Kb(),b.Kb(),b.hc(10,C,2,0,"ion-note",25),b.hc(11,K,2,0,"ion-note",26),b.Kb()}if(2&t){const t=b.Vb().$implicit;b.Yb("disabled",!t.disponible),b.yb(5),b.kc(" ",t.name," "),b.yb(2),b.kc(" ",t.category," "),b.yb(2),b.kc(" ",t.price," \u20ac"),b.yb(1),b.Yb("ngIf",t.disponible),b.yb(1),b.Yb("ngIf",!t.disponible)}}function O(t,i){if(1&t){const t=b.Mb();b.Lb(0,"ion-item-sliding"),b.hc(1,P,12,6,"ion-item",23),b.Lb(2,"ion-item-options",12),b.Lb(3,"ion-item-option",13),b.Tb("click",(function(){b.dc(t);const e=i.$implicit;return b.Vb().delete(e)})),b.Jb(4,"ion-icon",14),b.Kb(),b.Kb(),b.Kb()}if(2&t){const t=i.$implicit;b.yb(1),b.Yb("ngIf",t.formule)}}const I=[{path:"",component:(()=>{class t{constructor(t,i,e,n,o,s,l){this.router=t,this.routerOutlet=i,this.app=e,this.afDB=n,this.popoverController=o,this.modalController=s,this.navCtrl=l,this.items=[],this.getItemsFromFirebase()}doRefresh(t){setTimeout(()=>{t.target.complete()},1e3)}optionsPopover(t){return Object(c.a)(this,void 0,void 0,(function*(){const i=yield this.popoverController.create({component:h.a,event:t});return yield i.present()}))}presentPopover(t){return Object(c.a)(this,void 0,void 0,(function*(){const i=yield this.popoverController.create({component:m,componentProps:{},cssClass:"sort-popover",event:t,translucent:!0});return yield i.present()}))}goToEdit(t){return Object(c.a)(this,void 0,void 0,(function*(){this.navCtrl.navigateForward("tabs/tab2/edit",{queryParams:{item:t,afDB:this.afDB}})}))}presentAddModal(){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:f.a,componentProps:{afBD:this.afDB},cssClass:"",swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl});return yield t.present()}))}getItemsFromFirebase(){this.afDB.list("produits/").snapshotChanges(["child_added","child_removed","child_changed"]).subscribe(t=>{this.items=[],t.forEach(t=>{let i=t.payload.exportVal();this.items.push({key:t.key,name:i.name,category:i.category,price:i.price,firstPrice:i.firstPrice,stock:i.stock,formule:i.formule,formuleContent:i.formuleContent,disponible:i.disponible})});for(let i of Object.keys(this.items))if(this.items[i].formule){let t=0;for(let e of Object.keys(this.items[i].formuleContent))for(let n of Object.keys(this.items))this.items[i].formuleContent[e].title!=this.items[n].name||this.items[n].formule||(this.items[n].stock-this.items[i].formuleContent[e].quantite<0?this.items[i].disponible=!1:(t+=1,this.items[i].formuleContent.length==t&&(this.items[i].disponible=!0)))}})}delete(t){this.afDB.list("produits/").remove(t.key)}}return t.\u0275fac=function(i){return new(i||t)(b.Ib(r.g),b.Ib(n.I),b.Ib(p.a),b.Ib(g.a),b.Ib(n.bb),b.Ib(n.X),b.Ib(n.Y))},t.\u0275cmp=b.Cb({type:t,selectors:[["app-tab2"]],decls:22,vars:2,consts:[["mode","ios"],["fill","clear","slot","end",1,"toolbar-button",3,"click"],["name","chevron-down"],["name","add"],["slot","end","fill","clear",1,"toolbar-button",3,"click"],["name","ellipsis-vertical"],["slot","fixed",3,"ionRefresh"],["lines","full"],[1,"title"],["size","large"],[4,"ngFor","ngForOf"],["button","","style","--padding-top: 5px",3,"click",4,"ngIf"],["side","end"],["color","danger",3,"click"],["name","trash","slot","icon-only"],["button","",2,"--padding-top","5px",3,"click"],["src","https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y"],[2,"font-weight","bold"],[2,"font-size","medium"],["slot","end","color","danger",4,"ngIf"],["slot","end",4,"ngIf"],["slot","end","color","danger"],["slot","end"],["button","","style","--padding-top: 5px",3,"disabled","click",4,"ngIf"],["button","",2,"--padding-top","5px",3,"disabled","click"],["slot","end","style","text-align: end;",4,"ngIf"],["slot","end","style","text-align: end;","color","danger",4,"ngIf"],["slot","end",2,"text-align","end"],["slot","end","color","danger",2,"text-align","end"]],template:function(t,i){1&t&&(b.Lb(0,"ion-header",0),b.Lb(1,"ion-toolbar"),b.Lb(2,"ion-title"),b.ic(3,"Items"),b.Kb(),b.Lb(4,"ion-button",1),b.Tb("click",(function(t){return i.presentPopover(t)})),b.Jb(5,"ion-icon",2),b.Kb(),b.Lb(6,"ion-button",1),b.Tb("click",(function(){return i.presentAddModal()})),b.Jb(7,"ion-icon",3),b.Kb(),b.Lb(8,"ion-button",4),b.Tb("click",(function(t){return i.optionsPopover(t)})),b.Jb(9,"ion-icon",5),b.Kb(),b.Kb(),b.Kb(),b.Lb(10,"ion-content"),b.Lb(11,"ion-refresher",6),b.Tb("ionRefresh",(function(t){return i.doRefresh(t)})),b.Jb(12,"ion-refresher-content"),b.Kb(),b.Lb(13,"ion-list",7),b.Lb(14,"ion-item",8),b.Lb(15,"ion-title",9),b.ic(16,"Produits"),b.Kb(),b.Kb(),b.hc(17,L,5,1,"ion-item-sliding",10),b.Lb(18,"ion-item",8),b.Lb(19,"ion-title",9),b.ic(20,"Formules"),b.Kb(),b.Kb(),b.hc(21,O,5,1,"ion-item-sliding",10),b.Kb(),b.Kb()),2&t&&(b.yb(17),b.Yb("ngForOf",i.items),b.yb(4),b.Yb("ngForOf",i.items))},directives:[n.p,n.U,n.S,n.d,n.q,n.k,n.G,n.H,n.A,n.t,o.h,n.y,o.i,n.x,n.w,n.R,n.z,n.C,n.j],styles:[".title[_ngcontent-%COMP%]{margin-top:20px}.title[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{padding-left:0}ion-thumbnail[_ngcontent-%COMP%]{margin-right:10px}"]}),t})()},{path:"edit",loadChildren:()=>e.e(15).then(e.bind(null,"En3C")).then(t=>t.EditPageModule)}];let M=(()=>{class t{}return t.\u0275mod=b.Gb({type:t}),t.\u0275inj=b.Fb({factory:function(i){return new(i||t)},imports:[[r.i.forChild(I)],r.i]}),t})(),x=(()=>{class t{}return t.\u0275mod=b.Gb({type:t}),t.\u0275inj=b.Fb({factory:function(i){return new(i||t)},imports:[[n.V,o.b,s.a,l.a,M]]}),t})()}}]);