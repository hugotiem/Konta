{"version":3,"sources":["./src/app/tab2/tab2.page.html","./src/app/tab2/tab2-routing.module.ts","./src/app/tab2/tab2.module.ts","./src/app/tab2/tab2.page.scss","./src/app/tab2/tab2.page.ts"],"names":[],"mappings":"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","file":"tab2-tab2-module-es2015.js","sourcesContent":["export default \"<ion-header mode=\\\"ios\\\" >\\n  <ion-toolbar >\\n    <ion-title>Items</ion-title>\\n    <ion-button class=\\\"toolbar-button\\\" fill=\\\"clear\\\" slot=\\\"end\\\" (click)=\\\"presentPopover($event)\\\">\\n      <ion-icon name=\\\"chevron-down\\\"></ion-icon>\\n    </ion-button>\\n    <ion-button class=\\\"toolbar-button\\\" fill=\\\"clear\\\" slot=\\\"end\\\" (click)=\\\"presentAddModal()\\\">\\n      <ion-icon name=\\\"add\\\"></ion-icon>\\n    </ion-button>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n\\n  <ion-list lines=\\\"full\\\">\\n\\n    <ion-item class=\\\"title\\\">\\n      <ion-title size=\\\"large\\\">Produits</ion-title>\\n    </ion-item>\\n\\n    <ion-item-sliding *ngFor=\\\"let item of items; let i = index\\\">\\n      <ion-item *ngIf=\\\"!item.formule\\\" (click)=\\\"goToEdit(item)\\\" button style=\\\"--padding-top: 5px\\\" [disabled]=\\\"item.stock == 0\\\">\\n        <ion-img style=\\\"width: 70px; z-index: -1;\\\" src=\\\"../assets/img/marlboro_gold.jpg\\\" alt=\\\"Marlboro Gold\\\"></ion-img>\\n        <div>\\n          <ion-label style=\\\"font-weight: bold;\\\"> {{ item.name }} </ion-label>\\n          <ion-label style=\\\"font-size: medium;\\\"> {{ item.category }} </ion-label>\\n          <ion-note> {{ item.price }} €</ion-note>\\n        </div>\\n        <ion-chip slot=\\\"end\\\" *ngIf='item.stock == 0' color=\\\"danger\\\">\\n          <ion-label> {{ item.stock }} </ion-label>\\n        </ion-chip>\\n        <ion-chip slot=\\\"end\\\" *ngIf='item.stock != 0'>\\n          <ion-label> {{ item.stock }} </ion-label>\\n        </ion-chip>\\n\\n      </ion-item>\\n\\n      <ion-item-options side=\\\"end\\\">\\n        <ion-item-option (click)=\\\"delete(item)\\\" color=\\\"danger\\\">\\n          <ion-icon name=\\\"trash\\\" slot=\\\"icon-only\\\"></ion-icon>\\n        </ion-item-option>\\n      </ion-item-options>\\n    </ion-item-sliding>\\n\\n    <ion-item class=\\\"title\\\">\\n      <ion-title size=\\\"large\\\">Formules</ion-title>\\n    </ion-item>\\n\\n    <ion-item-sliding *ngFor=\\\"let item of items; let i = index\\\">\\n      <ion-item [disabled]=\\\"!item.disponible\\\" *ngIf=\\\"item.formule\\\" (click)=\\\"goToEdit(item)\\\" button style=\\\"--padding-top: 5px\\\">\\n        <ion-img style=\\\"width: 70px; z-index: -1;\\\" src=\\\"../assets/img/marlboro_gold.jpg\\\" alt=\\\"Marlboro Gold\\\"></ion-img>\\n        <div>\\n          <ion-label style=\\\"font-weight: bold;\\\"> {{ item.name }} </ion-label>\\n          <ion-label style=\\\"font-size: medium;\\\"> {{ item.category }} </ion-label>\\n          <ion-note> {{ item.price }} €</ion-note>\\n        </div>\\n\\n        <ion-note slot=\\\"end\\\" style=\\\"text-align: end;\\\" *ngIf=\\\"item.disponible\\\">Disponible</ion-note>\\n        <ion-note slot=\\\"end\\\" style=\\\"text-align: end;\\\" *ngIf=\\\"!item.disponible\\\" color=\\\"danger\\\">Indisponible</ion-note>\\n\\n      </ion-item>\\n\\n      <ion-item-options side=\\\"end\\\">\\n        <ion-item-option (click)=\\\"delete(item)\\\" color=\\\"danger\\\">\\n          <ion-icon name=\\\"trash\\\" slot=\\\"icon-only\\\"></ion-icon>\\n        </ion-item-option>\\n      </ion-item-options>\\n    </ion-item-sliding>\\n\\n  </ion-list>\\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab2Page } from './tab2.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab2Page,\n  },\n  {\n    path: 'edit',\n    loadChildren: () => import('./edit/edit.module').then( m => m.EditPageModule)\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab2PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab2Page } from './tab2.page';\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\n\nimport { Tab2PageRoutingModule } from './tab2-routing.module';\n\nimport { AddComponent } from './add/add.component';\nimport { QuantiteComponent } from './add/quantite/quantite.component';\nimport { OptionsComponent } from './add/options/options.component';\nimport { ProduitsListComponent } from './add/produits-list/produits-list.component';\n\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ExploreContainerComponentModule,\n    Tab2PageRoutingModule\n  ],\n  declarations: [Tab2Page, QuantiteComponent, OptionsComponent, ProduitsListComponent]\n})\nexport class Tab2PageModule {}\n","export default \"/****    HEADER    ****/\\n/****    CONTENT ****/\\n.title {\\n  margin-top: 20px;\\n}\\n.title ion-title {\\n  padding-left: 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdGFiMi90YWIyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSx1QkFBQTtBQUVBLHFCQUFBO0FBRUE7RUFDSSxnQkFBQTtBQURKO0FBR0k7RUFDSSxlQUFBO0FBRFIiLCJmaWxlIjoic3JjL2FwcC90YWIyL3RhYjIucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKiogICAgSEVBREVSICAgICoqKiovXHJcblxyXG4vKioqKiAgICBDT05URU5UICoqKiovXHJcblxyXG4udGl0bGUge1xyXG4gICAgbWFyZ2luLXRvcDogMjBweDtcclxuXHJcbiAgICBpb24tdGl0bGV7XHJcbiAgICAgICAgcGFkZGluZy1sZWZ0OiAwO1xyXG4gICAgfVxyXG59Il19 */\";","import { Component } from '@angular/core';\nimport { NavigationExtras, Router } from '@angular/router';\nimport { AngularFireDatabase } from '@angular/fire/database';\nimport { HttpClient } from '@angular/common/http';\n\n// COMPONENTS FROM IONIC\nimport { PopoverController } from '@ionic/angular';\nimport { ModalController } from '@ionic/angular';\nimport { IonRouterOutlet } from '@ionic/angular';\nimport { NavController } from '@ionic/angular';\n\n// OWN COMPONENTS\nimport { PopoverComponent } from './popover/popover.component';\nimport { AddComponent } from './add/add.component';\n\n// CLASS FROM PROJECT\nimport { AppComponent } from '../app.component';\nimport { ItemsComponent } from '../tab3/new/items/items.component';\n\n@Component({\n  selector: 'app-tab2',\n  templateUrl: 'tab2.page.html',\n  styleUrls: ['tab2.page.scss']\n})\nexport class Tab2Page {\n\n  public items: any = []\n\n  constructor(\n    private router: Router, \n    private routerOutlet: IonRouterOutlet,\n    private app: AppComponent,\n    public afDB: AngularFireDatabase, \n    private popoverController: PopoverController, \n    private modalController: ModalController,\n    private navCtrl: NavController) {\n\n    //this.items = this.app.items;\n    this.getItemsFromFirebase();\n\n  }\n\n  doRefresh(event) {\n    setTimeout(() => {\n      event.target.complete();\n    }, 1000);\n  }\n\n  async presentPopover(ev: any) {\n    const popover = await this.popoverController.create({\n      component: PopoverComponent,\n      componentProps: {\n        \n      },\n      cssClass: 'sort-popover',\n      event: ev,\n      translucent: true\n    });\n    return await popover.present();\n  }\n\n  async goToEdit(item: any) {\n    let navData: NavigationExtras = {\n      queryParams: {\n        item: item,\n        afDB: this.afDB\n      }\n    }\n    this.navCtrl.navigateForward('tabs/tab2/edit', navData);\n  }\n\n  async presentAddModal() {\n    const modal = await this.modalController.create({\n      component: AddComponent,\n      componentProps: {\n        afBD: this.afDB\n      },\n      cssClass: '', \n      swipeToClose: true,\n      presentingElement: this.routerOutlet.nativeEl\n    });\n    return await  modal.present();\n  }\n\n  getItemsFromFirebase(){ \n    this.afDB.list('produits/').snapshotChanges(['child_added', 'child_removed', 'child_changed']).subscribe(actions => {\n      this.items = [];\n      \n      actions.forEach(action => {\n\n        let item = action.payload.exportVal();\n        this.items.push({\n          key: action.key,\n          name: item.name,\n          category: item.category,\n          price: item.price,\n          firstPrice: item.firstPrice,\n          stock: item.stock,\n          formule: item.formule,\n          formuleContent: item.formuleContent,\n          disponible: item.disponible\n        })\n      })\n\n      for(let i of Object.keys(this.items)){\n        if(this.items[i].formule){\n          let cpt: number = 0;\n          for(let j of Object.keys(this.items[i].formuleContent)){\n            for(let k of Object.keys(this.items)){\n              if(this.items[i].formuleContent[j].title == this.items[k].name && !this.items[k].formule){    \n                if(this.items[k].stock - this.items[i].formuleContent[j].quantite < 0){\n                  this.items[i].disponible = false;\n                }\n                else {\n                  cpt = cpt + 1;\n                  if(this.items[i].formuleContent.length == cpt){\n                    this.items[i].disponible = true;\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    })\n  }\n\n  delete(item: any) {\n    this.afDB.list('produits/').remove(item.key);\n  }\n\n}\n"],"sourceRoot":"webpack:///"}